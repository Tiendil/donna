
* TODO automatic action request finish on artifact creation
* TODO when we want to get a record/record-kind from the story we do not load the whole index — artifact id should be enough.
* TODO need some task/command to output the whole story spec
* TODO freeze pydantic models which are possible
* TODO codex should explain what it is doing, while executing requests from donna
* TODO replace all NotImplementedError exceptions with custom exceptions and smart error handling
* TODO review the dictionary of primary terms
* TODO complex story workflow
** DONE choose the name for the story
** DONE simplest linear workflow: agent description -> goals -> objectives -> risks -> plan -> exectution -> grooming
** TODO list based artifacts
*** TODO LIST artifacts with operations add, remove, replace
*** TODO iterate and groom over goals & objectives
*** TODO iterate over risks
*** TODO build plan from objectives and risks
*** TODO execute the plan by taking actions from the plan
** TODO graph-bases execution of the plan:
*** TODO buiild things-to-do by iterating over it in the contexts of objectives and risjs
*** TODO GRAPH(-LIST) artifacts with additiona operations to describe dependencies between list items
*** TODO build plan on top of things-to-do list
** TODO verify all risks are closed and rollback to planing if not
** TODO verify all objectives are met and rollback to planing if not
** TODO Split the whole worfklow into smaller scenarios/tasks?
** TODO prepare a report after the story is finished
** TODO custom command to run a specific subflow? Or whould we rest it to the agent? It look like agent can deside better, because otherwise we'll introduce a hard coupling between different flows.
** TODO replace "here is the beginning of the story specification" with an introspection of the records?
** TODO refactor records/kinds/items names, place them in order
* TODO tests
** TODO basic / lowest unit tests for primitive operations
** TODO domain-level unit tests
** TODO intergration tests for workflows/stories/scenarios
* TODO split operations into code and configs, since most of them are configs
* TODO end_to_end_story_cycle — maybe we should move the whole task flows into a separate package? or organize them better?
* TODO codex struggle with artifact names (skips file extensions, until explicitly told to use the full name). Maybe we should simplify artifact names?
* TODO optimize imports by moving most used ones to \__init__.py files
* TODO `behavior` can be something on top of workflows. Maybe it be a constructor of workflows. I.e. user define own workflow by parametrizing them via `behavior`.
* TODO Relations / dependencies between records
** TODO Store relations in the records index
** TODO cli commands to add/remove relations
** TODO storage of allowed relation types
** TODO operations to validate that each list item has required relations
* TODO Objectives loop
** TODO Full spec on planing activities
** TODO Objectives grooming loop
*** choose unprocessed objective
*** groom objective
*** maybe via a single action request operation? With customized code for searching next objective to process
** TODO Goal-objective relations
** TODO Iterate goals into objectives
** TODO Full objective set grooming (may be moved into separate TODO list, since it may require planing)
** TODO Goals grooming (may be moved into separate TODO list, since it may require planing)
* TODO We may want to get counters on every level of workspaces like "a:b:c", where story is one of the levels and donna workspace is the other.
* TODO move action requests cli out of story cli, but where?
* TODO Action request operation refactoring (most-likely, rewrite to Jinja2)
** requested_kind_spec can be removed in the honor of using jinjaglobal function in the template
*** however, the hidden functionality ensures displaying the specification of the record kind before the action request is displayed
** partical_description should be built somehow differently then now (not transparent enough)
** Include the exact donna commands in the action request body. Right now it assumes the agent remembers or infers the CLI syntax
* TODO Records navigation + introspection
** TODO donna records ?extract? <kind*> <--property=>*
*** add <display/renderer> as the global object that defines how to render the output
*** maybe display may be just jinja template?
*** dow we really need display? Maybe cells will be ok for technical output?
*** What we need:
**** select by kinds (and display kinds in order?)
**** filter by properties (better to have reach filtering syntax?)
**** run graph opertions on top of the result set? Or maybe just different <sort> operations?
** TODO replace partial description with new ?extract? command
** TODO Maybe we do not need kinds separate from records?
* TODO Consider using https://github.com/toon-format/toon for json formatting in cells
* TODO WE CAN ASK DONNA TO MAKE A FSM FOR DONNA!!! WHICH WILL BE OUR PLAN OF WORK!!!
* TODO rename plan.py/plan.json, because it conflates with the planing records
* TODO virtual persona/roles as spects, so action request can tell whos role should be used to answer or agent could decide by itself
* TODO do we really need multiple stories? It looks like we always work on a single story every time.
* TODO Remove stories, keep only "current work" space
** update commands in specifications
** remove usage of "stories" word from specifications
* TODO refactor workflows + operations into configs
** ":" to access a part of the artifact? world.kind.artifact_path_with_extension:operation?
** remove layout.py?
* TODO error messages should provide helpful hints for agents
